<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<link rel="icon" type="image/png" sizes="64x64" href="./Assets/Images/filmpulseicon.png">
	<meta http-equiv="Permissions-Policy" content="accelerometer=(), camera=(), geolocation=()">
	<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,400i,700&display=swap" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
	<link href="./Assets/css/overview.css" rel="stylesheet">
	<title>FilmPulse - Overview</title>
</head>
<body>
	<div class="container-wrapper">
		<nav aria-label="main navigation" class="navbar" role="navigation">
			<div class="container">
				<div class="navbar-brand">
					<a class="navbar-item has-text-white is-size-4 neon-text" href="index.html">FilmPulse</a> <a aria-expanded="false" aria-label="menu" class="navbar-burger" data-target="navbarMenu" id="navbarBurger" role="button"><!-- Hamburger icon for the main menu -->
					 <span aria-hidden="true" id="hamburgerIconMain"></span> <span aria-hidden="true" id="hamburgerIconMain"></span> <span aria-hidden="true" id="hamburgerIconMain"></span></a>
				</div>
				<div class="navbar-menu" id="navbarMenu">
					<div class="navbar-end">
						<div class="field has-addons" style="margin-top: 10px;">
							<p class="control"><input class="input is-rounded is-small custom-search-bar" id="search" placeholder="Enter a title" type="text" autocomplete="off"></p>
							<p class="control"><button class="button is-info is-small custom-search-button" id="searchButton">Search</button></p>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a class="navbar-link has-text-white">Movie Genres</a>
							<div class="navbar-dropdown has-background-dark">
								<a class="navbar-item has-text-white" href="genreoverview.html?genre=Action">Action</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Adventure">Adventure</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Animation">Animation</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Comedy">Comedy</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Crime">Crime</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Drama">Drama</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Family">Family</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Fantasy">Fantasy</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Horror">Horror</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Mystery">Mystery</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Romance">Romance</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Sci-Fi">Sci-Fi</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Thriller">Thriller</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=War">War</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Western">Western</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Documentary">Documentary</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Musical">Musical</a> <a class="navbar-item has-text-white" href="genreoverview.html?genre=Historical">Historical</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a class="navbar-link has-text-white">TV Show Genres</a>
							<div class="navbar-dropdown has-background-dark">
								<a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Action">Action</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Adventure">Adventure</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Animation">Animation</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Comedy">Comedy</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Crime">Crime</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Drama">Drama</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Family">Family</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Fantasy">Fantasy</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Mystery">Mystery</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Romance">Romance</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Sci-Fi">Sci-Fi</a>  <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=War">War</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Western">Western</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Documentary">Documentary</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Musical">Musical</a> <a class="navbar-item has-text-white" href="tvgenreoverview.html?genre=Historical">Historical</a>
							</div>
						</div><a class="navbar-item custom-hover has-text-white neon-text" href="about.html">About Us</a>  
					</div>
				</div>
			</div>
		</nav>
		<section class="main-page section">
			<div class="container">
				<div class="columns is-centered">
					<div class="column is-8">
						<div class="card-content has-text-white">
							<p class="title has-text-white mt-5" id="movieTitle">Title</p>
							<p id="movieYear"></p>
						</div>
						<div class="columns">
							<div class="column is-4">
								<div class="image"><img alt="moviePoster" id="posterImage" src=""></div>
							</div>
							<div class="column is-8">
								<div id="trailerContainer"></div>
							</div>
						</div>
						<div class="card-content has-text-white">
							<p id="moviePlot"></p>
							<p id="movieSeasons">Seasons:</p>
							<p id="movieEpisodes">Episodes:</p> 
							<p id="movieDirector">Director:</p>
							<p id="movieGenre">Genre:</p>
							
						</div>
					</div>
				</div>
			</div>
			
		</section>
		
		<script src="https://code.jquery.com/jquery-3.6.0.min.js">
		</script> 
		<script src="./Assets/js/common.js">
		</script> 
		<script src="./Assets/js/tvgenre.js">
		</script> 
		 
		<script>
		      document.addEventListener('DOMContentLoaded', function () {
		     // Get the burger icon for the main menu
		     var burgerMain = document.getElementById('navbarBurger');
		     var menu = document.getElementById('navbarMenu');
		 
		     // Get all elements with the class "navbar-item" that have a dropdown
		     var dropdownItems = document.querySelectorAll('.navbar-item.has-dropdown');
		 
		     // Hide all dropdowns initially
		     dropdownItems.forEach(function (item) {
		         var dropdown = item.querySelector('.navbar-dropdown');
		         dropdown.style.display = 'none';
		     });
		 
		     // Function to close the menu
		     function closeMenu() {
		         menu.classList.remove('is-active');
		     }
		 
		     // Add a click event listener to the burger icon for the main menu
		     burgerMain.addEventListener('click', function (event) {
		         event.stopPropagation(); // Prevent document click event from firing
		         // Toggle the 'is-active' class on the menu
		         menu.classList.toggle('is-active');
		     });
		 
		     // Add a global click event listener to hide dropdowns when clicking outside
		     document.addEventListener('click', function (event) {
		         // Close the menu if the click is outside of the menu
		         if (!menu.contains(event.target)) {
		             closeMenu();
		         }
		 
		         // Close dropdowns when clicking outside
		         dropdownItems.forEach(function (item) {
		             var dropdown = item.querySelector('.navbar-dropdown');
		             if (event.target !== item && event.target !== item.querySelector('.navbar-link')) {
		                 dropdown.style.display = 'none';
		             }
		         });
		     });
		 
		     // Loop through each navbar item with a dropdown
		     dropdownItems.forEach(function (item) {
		         // Get the corresponding dropdown
		         var dropdown = item.querySelector('.navbar-dropdown');
		 
		         // Get the unique ID for this dropdown
		         var dropdownId = item.getAttribute('data-dropdown-id');
		 
		         // Add a click event listener to the navbar-link
		         item.querySelector('.navbar-link').addEventListener('click', function (event) {
		             // Prevent the default link behavior
		             event.preventDefault();
		 
		             // Toggle the 'is-active' class on the dropdown to show/hide it
		             dropdown.style.display = (dropdown.style.display === 'none') ? 'block' : 'none';
		         });
		     });
		 });
		 
		</script> 
		<script>
			function fetchTVShowTrailer(tvShowId) {
    const apiKey = '57def683b1f588faea8196f4db0da86c';
    const baseUrl = 'https://api.themoviedb.org/3';

    // Construct the URL to fetch TV show videos by ID
    const videosUrl = `${baseUrl}/tv/${tvShowId}/videos?api_key=${apiKey}&language=en-US`;

    // Clear the trailer container
    $('#trailerContainer').html('');

    // Make the API request to fetch TV show videos
    $.get(videosUrl, function (data) {
        if (data.results && data.results.length > 0) {
            // Filter to get only videos of type 'Trailer' that belong to TV shows
            const trailer = data.results.find(function (video) {
                return video.type === 'Trailer' && video.site.toLowerCase() === 'youtube';
            });

            if (trailer) {
                const trailerKey = trailer.key;
                const trailerHtml = `
                    <iframe src="https://www.youtube.com/embed/${trailerKey}" frameborder="0" allowfullscreen></iframe>
                `;

                $('#trailerContainer').html(trailerHtml);
            } else {
                // No TV show trailer of type 'Trailer' found
                $('#trailerContainer').html('<div style="display: flex; justify-content: center; align-items: center; height: 400px;"><p>Trailer not available :(</p></div>');
            }
        } else {
            // No video data available
            $('#trailerContainer').html('<div style="display: flex; justify-content: center; align-items: center; height: 400px;"><p>Trailer not available :(</p></div>');
        }
    }).fail(function (error) {
        console.error('Error fetching TV show videos:', error);
        // Handle the error, e.g., display an error message in the trailer container
        $('#trailerContainer').html('<p>Error fetching TV show trailers. Please try again later.</p>');
    });
}
			document.addEventListener('DOMContentLoaded', function () {
				// Retrieve detailed TV show data from local storage
				var detailedTVShowData = JSON.parse(localStorage.getItem('detailedTVShowData'));
				
				// Update HTML elements with TV show data
				document.getElementById('movieTitle').textContent = detailedTVShowData.name;
				document.getElementById('movieYear').textContent = detailedTVShowData.first_air_date ? new Date(detailedTVShowData.first_air_date).getFullYear() : '';

				document.getElementById('posterImage').src = 'https://image.tmdb.org/t/p/w300' + detailedTVShowData.poster_path;
				document.getElementById('moviePlot').textContent = detailedTVShowData.overview;
				document.getElementById('movieSeasons').textContent = 'Seasons: ' + detailedTVShowData.number_of_seasons;
				document.getElementById('movieEpisodes').textContent = 'Episodes: ' + detailedTVShowData.number_of_episodes;
				document.getElementById('movieDirector').textContent = 'Created By: ' + detailedTVShowData.created_by.map(function (creator) {
					return creator.name;
				}).join(', ');
				 
				
    	
	fetchTVShowTrailer(detailedTVShowData.id);
			});
		</script>
	</div>
</body>
</html>